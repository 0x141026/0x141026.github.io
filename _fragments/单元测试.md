---
layout: fragment
title: 单元测试中的坑
tags: [单元测试, powermock, PrepareForTest注解, jacoco]
description: some word here
keywords: 单元测试, powermock, PrepareForTest注解, jacoco 
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---
1. 但是用PowerMockRunner的时候，当你发现mock的类，不是Mock实例时
> 1. Mock、InjectMock需要使用@Before来设置MockitoAnnotation.initMocks(this)来初始化对象。
> 2. 或者PrepareForTest注解包含要测试的类。
2. PrepareForTest注解如果包含了要测试的类，有可能会和jacoco插件冲突，导致jacoco插件出来的覆盖率为0。
> 这时，需要去掉PrepareForTest中的被测试类，或者不使用PowerMockRunner

---
上面两点问题，有点循环矛盾！

***总结：所以当使用了jacoco插件时，就不要用PrepareForTest注解;***
